From 0afc0f0f43a9159210b5f90a7dd5740032f0764c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=A1=D0=BE=D1=81=D0=BD=D0=B0=20=D0=95=D0=B2=D0=B3=D0=B5?=
 =?UTF-8?q?=D0=BD=D0=B8=D0=B9?= <shenja@sosna.zp.ua>
Date: Sat, 17 Sep 2016 17:54:43 +0300
Subject: [PATCH] =?UTF-8?q?=D0=9E=D0=BF=D1=82=D0=B8=D0=BC=D0=B8=D0=B7?=
 =?UTF-8?q?=D0=B0=D1=86=D0=B8=D1=8F=20=D0=B8=D0=B7=D0=B1=D1=8B=D1=82=D0=BE?=
 =?UTF-8?q?=D1=87=D0=BD=D0=BE=D0=B9=20=D0=BF=D1=80=D0=BE=D0=B2=D0=B5=D1=80?=
 =?UTF-8?q?=D0=BA=D0=B8=20=D1=81=D0=BE=D1=81=D1=82=D0=B0=D0=B2=D0=B0=20?=
 =?UTF-8?q?=D1=84=D1=83=D0=BD=D0=BA=D1=86.=20=D0=BE=D0=BF=D1=86=D0=B8?=
 =?UTF-8?q?=D0=B9=20=D0=B7=D0=B0=20=D1=81=D1=87=D0=B5=D1=82=20=D0=B2=D1=8B?=
 =?UTF-8?q?=D0=B7=D0=BE=D0=B2=D0=B0=20=D0=B1=D0=B8=D0=B1=D0=BB=D0=B8=D0=BE?=
 =?UTF-8?q?=D1=82=D0=B5=D1=87=D0=BD=D0=BE=D0=B9=20=D1=84=D1=83=D0=BD=D0=BA?=
 =?UTF-8?q?=D1=86=D0=B8=D0=B8,=20=D0=B8=D1=81=D0=BF=D0=BE=D0=BB=D1=8C?=
 =?UTF-8?q?=D0=B7=D1=83=D1=8E=D1=89=D0=B5=D0=B9=20=D0=BA=D1=8D=D1=88.?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../ФормаСписка/Ext/Form/Module.bsl     | 30 ++--------------------
 1 file changed, 2 insertions(+), 28 deletions(-)

diff --git a/cf/DocumentJournals/РеестрТорговыхДокументов/Forms/ФормаСписка/Ext/Form/Module.bsl b/cf/DocumentJournals/РеестрТорговыхДокументов/Forms/ФормаСписка/Ext/Form/Module.bsl
index 355869f..5d427a0 100644
--- a/cf/DocumentJournals/РеестрТорговыхДокументов/Forms/ФормаСписка/Ext/Form/Module.bsl
+++ b/cf/DocumentJournals/РеестрТорговыхДокументов/Forms/ФормаСписка/Ext/Form/Module.bsl
@@ -126,7 +126,7 @@
 	
 	СписокДоступныхМетаданных = Новый СписокЗначений();
 	Для Каждого ОписаниеМетаданныхДокумента Из Метаданные.ЖурналыДокументов.РеестрТорговыхДокументов.РегистрируемыеДокументы Цикл
-		Если ОбъектРазрешенВФункциональнойОпции(ОписаниеМетаданныхДокумента) Тогда
+		Если ОбщегоНазначения.ОбъектМетаданныхДоступенПоФункциональнымОпциям(ОписаниеМетаданныхДокумента) Тогда
 			СписокДоступныхМетаданных.Добавить(Тип("ДокументСсылка." + ОписаниеМетаданныхДокумента.Имя), ОписаниеМетаданныхДокумента.Синоним);
 		КонецЕсли;
 	КонецЦикла;
@@ -170,32 +170,6 @@
 
 КонецПроцедуры
 
-&НаСервереБезКонтекста
-Функция ОбъектРазрешенВФункциональнойОпции(МетаОбъект)
-
-	МассивОпций = Новый Массив();
-	
-	Для каждого Опция Из Метаданные.ФункциональныеОпции Цикл
-		ОбъектВходитВФО = Опция.Состав.Содержит(МетаОбъект);
-		Если ОбъектВходитВФО Тогда
-			МассивОпций.Добавить(Опция);
-		КонецЕсли; 
-	КонецЦикла; 
-	
-	Если МассивОпций.Количество() = 0 Тогда
-		Возврат Истина;
-	КонецЕсли;
-	
-	Для каждого Элемент Из МассивОпций Цикл
-		Если ПолучитьФункциональнуюОпцию(Элемент.Имя) Тогда
-			Возврат Истина;
-		КонецЕсли;
-	КонецЦикла; 
-	
-	Возврат Ложь;
-	
-КонецФункции
-
 &НаСервере
 Процедура СформироватьГруппуКнопокСоздать()
 	
@@ -238,7 +212,7 @@
 	Соответствие = Новый Структура();
 	Разделы = ПолучитьРазделыКомандногоИнтерфейса();
 	Для каждого ПодсистемаВерхнегоУровня Из Разделы Цикл
-		Если ПодсистемаВерхнегоУровня.ВключатьВКомандныйИнтерфейс и ОбъектРазрешенВФункциональнойОпции(ПодсистемаВерхнегоУровня) Тогда
+		Если ПодсистемаВерхнегоУровня.ВключатьВКомандныйИнтерфейс и ОбщегоНазначения.ОбъектМетаданныхДоступенПоФункциональнымОпциям(ПодсистемаВерхнегоУровня) Тогда
 			Ключ = ПодсистемаВерхнегоУровня.Имя;
 			МассивЗначений = Новый Массив();
 			МассивЗначений.Добавить(ПодсистемаВерхнегоУровня);
-- 
2.6.2.windows.1

