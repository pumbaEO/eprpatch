From 93d1e05bb2aa1b657970d9461dafec3e9a88d35a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=A1=D0=BE=D1=81=D0=BD=D0=B0=20=D0=95=D0=B2=D0=B3=D0=B5?=
 =?UTF-8?q?=D0=BD=D0=B8=D0=B9?= <shenja@sosna.zp.ua>
Date: Fri, 7 Oct 2016 13:14:31 +0300
Subject: [PATCH] =?UTF-8?q?=D0=98=D1=81=D0=BF=D1=80=D0=B0=D0=B2=D0=B8?=
 =?UTF-8?q?=D0=BB=20=D0=BD=D0=B0=20=D1=80=D0=B0=D0=B1=D0=BE=D1=82=D1=83=20?=
 =?UTF-8?q?=D1=81=20=D0=9F=D0=BE=D0=B2=D1=82=D0=98=D1=81=D0=BF,=20=D1=82.?=
 =?UTF-8?q?=D0=BA.=20=D1=82=D0=B5=D0=BA=D1=83=D1=89=D0=B8=D0=B9=20=D1=80?=
 =?UTF-8?q?=D0=B5=D0=B6=D0=B8=D0=BC=20=D0=BD=D0=B5=20=D0=B8=D1=81=D0=BF?=
 =?UTF-8?q?=D0=BE=D0=BB=D1=8C=D0=B7=D1=83=D0=B5=D1=82=20=D0=BF=D1=80=D0=B5?=
 =?UTF-8?q?=D0=B9=D0=BC=D1=83=D1=89=D0=B5=D1=81=D1=82=D0=B2=D0=B0=20=D1=80?=
 =?UTF-8?q?=D0=B5=D0=B6=D0=B8=D0=BC=D0=B0=20=D0=BF=D0=BE=D0=B2=D1=82.?=
 =?UTF-8?q?=D0=B8=D1=81=D0=BF=D0=BE=D0=BB=D1=8C=D0=B7=D0=BE=D0=B2=D0=B0?=
 =?UTF-8?q?=D0=BD=D0=B8=D1=8F?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Для исправления переимновал процедуру ДополнитьМассивОписанияВозможныхКонтактов на функцию ПолучитьОписанияВозможныхКонтактов, сделал специально, что-бы при обновление даже простейший синтаксис контроль дал сообщение об ошибке неправильного объединения.
---
 .../Ext/Module.bsl                                          |  8 ++++++--
 .../Ext/Module.bsl                                          | 13 +++++++++----
 2 files changed, 15 insertions(+), 6 deletions(-)

diff --git a/cf/CommonModules/ВзаимодействияКлиентСервер/Ext/Module.bsl b/cf/CommonModules/ВзаимодействияКлиентСервер/Ext/Module.bsl
index 15f039d..271f6b9 100644
--- a/cf/CommonModules/ВзаимодействияКлиентСервер/Ext/Module.bsl
+++ b/cf/CommonModules/ВзаимодействияКлиентСервер/Ext/Module.bsl
@@ -456,12 +456,16 @@
 //              ВзаимодействияКлиентСервер.
 //
 Функция МассивОписанияВозможныхКонтактов() Экспорт
-
+	Перем ВозможныеКонтактыПереопр;
+	
 	МассивВозможныеКонтакты = Новый Массив();
 	ДобавитьЭлементМассиваОписанияВозможныхТиповКонтактов(МассивВозможныеКонтакты,
 		Тип("СправочникСсылка.Пользователи"),Ложь,"Пользователи","Пользователи",Ложь,Ложь,"",Ложь,"");
 		
-	ВзаимодействияКлиентСерверПовтИспПереопределяемый.ДополнитьМассивОписанияВозможныхКонтактов(МассивВозможныеКонтакты);
+	ВозможныеКонтактыПереопр = ВзаимодействияКлиентСерверПовтИспПереопределяемый.ПолучитьОписанияВозможныхКонтактов();
+	ОбщегоНазначенияКлиентСервер.ДополнитьМассив(МассивВозможныеКонтакты, ВозможныеКонтактыПереопр);
+	
+	ВозможныеКонтактыПереопр = Неопределено;
 	
 	Возврат МассивВозможныеКонтакты;
 
diff --git a/cf/CommonModules/ВзаимодействияКлиентСерверПовтИспПереопределяемый/Ext/Module.bsl b/cf/CommonModules/ВзаимодействияКлиентСерверПовтИспПереопределяемый/Ext/Module.bsl
index 9a755e3..8e63685 100644
--- a/cf/CommonModules/ВзаимодействияКлиентСерверПовтИспПереопределяемый/Ext/Module.bsl
+++ b/cf/CommonModules/ВзаимодействияКлиентСерверПовтИспПереопределяемый/Ext/Module.bsl
@@ -33,7 +33,7 @@
 	
 КонецФункции
 
-// Дополняет описания возможных типов контактов.
+// Возвращает массив описания возможных типов контактов.
 // Используется, если в конфигурации определен хотя бы один тип контактов взаимодействий,
 // помимо справочника Пользователи.
 //
@@ -44,7 +44,9 @@
 //              ДобавитьЭлементМассиваОписанияВозможныхТиповКонтактов общего модуля.
 //              ВзаимодействияКлиентСервер.
 //
-Процедура ДополнитьМассивОписанияВозможныхКонтактов(МассивВозможныеКонтакты) Экспорт
+Функция ПолучитьОписанияВозможныхКонтактов() Экспорт
+	
+	МассивВозможныеКонтакты = Новый Массив;
 	
 	ПредставлениеПартнеры = ПартнерыИКонтрагентыВызовСервера.ПредставлениеСправочникаПартнеры();
 	
@@ -89,7 +91,10 @@
         ЗарплатаКадрыРасширенный.ДополнитьМассивОписанияВозможныхКонтактов(МассивВозможныеКонтакты);
     #КонецЕсли
 	//-- НЕ УТ
-																					 
-КонецПроцедуры
+	
+	Возврат МассивВозможныеКонтакты;
+	
+КонецФункции
+
 
 #КонецОбласти
-- 
2.6.2.windows.1

